tinymce.PluginManager.requireLangPack("codemirror");tinymce.PluginManager.add("codemirror",function(e,o){function t(){e.focus();e.selection.collapse(true);var t=e.selection.getNode().querySelector("br[data-mce-bogus]");if(t){e.selection.setContent("&nbsp;");e.selection.getNode().removeChild(t)}if(e.selection.getNode().nodeName!=="STYLE"){e.selection.setContent('<span class="CmCaReT" style="display:none">&#0;</span>')}var c=tinymce.DOM.getViewPort();scrollTo(0,0);var n={title:"HTML source code",url:o+"/source.html",width:800,height:550,resizable:true,maximizable:true,fullScreen:e.settings.codemirror.fullscreen,buttons:[{text:"Ok",subtype:"primary",onclick:function(){var e=document.querySelectorAll(".mce-container-body>iframe")[0];e.contentWindow.submit();r.close()}},{text:"Cancel",onclick:"close"}]};var r=e.windowManager.open(n);if(e.settings.codemirror.fullscreen){r.fullscreen(true)}scrollTo(c.x,c.y)}e.addButton("code",{title:"Source code",icon:"code",onclick:t});e.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:t})});